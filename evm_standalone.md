# How to execute EVM standalone
This is the guide to execute EVM standalone without using go-ethereum client.
* This document is written for evm version 1.8.2-stable-b8b9f7f4

## Installation
First of all, install some environments to run the EVM standalone.

### Install geth(go-ethereum) client on Ubuntu via PPAs
To enable our launchpadrepository please run:
```
sudo add-apt-repository -y ppa:ethereum/ethereum
```
After that you can install the stable version of Go Ethereum:
```
sudo apt-get update   
sudo apt-get install ethereum
```
### Install Solidity Compiler
```
npm install -g solc
```

## Make the Solidity Smart Contract file
add.sol
```Solidity
contract Addition{
    int x;
    function add(inta, intb) public returns (int) {
        x = a + b;
        return x;
    }
}
```

## Compile the Solidity file
`--bin-runtime`: we get the code as it would be in the contract after having been deployed - we can test that with the evm tool.  
`--overwrite`: Overwrite the output file.  
`--optimization`: Enable bytecode optimizer.  
`-o [ --output-dir ] path`: If given, creates one file per component and contract/file at the specified directory.  
```
solc --bin-runtime --overwrite --optimize -o . add.sol
======= Output file =======
Addition.bin-runtime
```

## We get the functionid from solc
```
$ solc --hashes add.sol
======= Addition =======
Function signatures: 
a5f3c23b: add(int256,int256)
```

## Let's call the add function
add(5, 4) is called by
```
evm --input a5f3c23b00000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000004 --codefile Addition.bin-runtime run
======= Result =======
0x0000000000000000000000000000000000000000000000000000000000000009
```

## If you want more information, do debug mode
```
evm --input a5f3c23b00000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000004 --codefile Addition.bin-runtime --debug run
======= Output =======
#### TRACE ####
PUSH1           pc=00000000 gas=10000000000 cost=3

PUSH1           pc=00000002 gas=9999999997 cost=3
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000060

MSTORE          pc=00000004 gas=9999999994 cost=12
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000040
00000001  0000000000000000000000000000000000000000000000000000000000000060
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|

PUSH1           pc=00000005 gas=9999999982 cost=3
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 60  |...............`|

CALLDATASIZE    pc=00000007 gas=9999999979 cost=2
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000004
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 60  |...............`|

LT              pc=00000008 gas=9999999977 cost=3
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000044
00000001  0000000000000000000000000000000000000000000000000000000000000004
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 60  |...............`|

...

SWAP2           pc=00000113 gas=9999979815 cost=3
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000060
00000001  0000000000000000000000000000000000000000000000000000000000000060
00000002  0000000000000000000000000000000000000000000000000000000000000080
00000003  00000000000000000000000000000000000000000000000000000000a5f3c23b
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 60  |...............`|
00000060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000070  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 09  |................|
Storage:
0000000000000000000000000000000000000000000000000000000000000000: 0000000000000000000000000000000000000000000000000000000000000009

SUB             pc=00000114 gas=9999979812 cost=3
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000080
00000001  0000000000000000000000000000000000000000000000000000000000000060
00000002  0000000000000000000000000000000000000000000000000000000000000060
00000003  00000000000000000000000000000000000000000000000000000000a5f3c23b
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 60  |...............`|
00000060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000070  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 09  |................|
Storage:
0000000000000000000000000000000000000000000000000000000000000000: 0000000000000000000000000000000000000000000000000000000000000009

SWAP1           pc=00000115 gas=9999979809 cost=3
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000020
00000001  0000000000000000000000000000000000000000000000000000000000000060
00000002  00000000000000000000000000000000000000000000000000000000a5f3c23b
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 60  |...............`|
00000060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000070  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 09  |................|
Storage:
0000000000000000000000000000000000000000000000000000000000000000: 0000000000000000000000000000000000000000000000000000000000000009

RETURN          pc=00000116 gas=9999979806 cost=0
Stack:
00000000  0000000000000000000000000000000000000000000000000000000000000060
00000001  0000000000000000000000000000000000000000000000000000000000000020
00000002  00000000000000000000000000000000000000000000000000000000a5f3c23b
Memory:
00000000  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000010  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000020  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000030  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000040  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000050  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 60  |...............`|
00000060  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  |................|
00000070  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 09  |................|
Storage:
0000000000000000000000000000000000000000000000000000000000000000: 0000000000000000000000000000000000000000000000000000000000000009

#### LOGS ####
```

# Conclusion
That concludes this introductory guide to the Ethereum Virtual Machine standalone.
I wrote this document so that I can evaluate the performance of the EVM and compare it with other compilers or Virtual Machines.
The experimental scripts and results will be uploaded later.

# Reference
[1] https://geth.ethereum.org/install/  
[2] http://solidity.readthedocs.io/en/v0.4.21/installing-solidity.html  
[3] https://github.com/CoinCulture/evm-tools/blob/master/analysis/guide.md
